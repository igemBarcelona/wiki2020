


<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>UPF_Barcelona</title>
        <link rel="icon" type="image/x-icon" href="assets/img/favicon.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v5.13.0/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Catamaran:100,200,300,400,500,600,700,800,900" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Dosis:100,200,300,400,500,600,700,800,900" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/our_css.css" rel="stylesheet" />

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    
        <!-- AOS animations -->
        <link href="https://unpkg.com/aos@next/dist/aos.css" rel="stylesheet">
      
      </head>



    <body id="page-top" style="background-color: var(--light-gray)">

      <div class="header">
          <!-- Navigation-->
      <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav" style="background-color: var(--dark-gray)">
        <div class="container">
            <a class="navbar-brand js-scroll-trigger" href="index.html"><img src="img/logo.png" alt="" /></a>
            <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                Menu
                <i class="fas fa-bars ml-1"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav text-uppercase ml-auto">

                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                          Project
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                          <a class="dropdown-item" href="description.html">Description</a>
                          <a class="dropdown-item" href="design.html">Design</a>
                          <a class="dropdown-item" href="implementation.html">Implementation</a>
                          <a class="dropdown-item" href="engineering.html">Engineering</a>
                          <div class="dropdown-divider"></div>
                          <a class="dropdown-item" href="safety.html">Safety</a>
                        </div>
                    </li>

                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Labwork
                          </a>
                          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item" href="lactone.html">Lactone circuit</a>
                            <a class="dropdown-item" href="biosensor.html">T3 biosensor</a>
                            <a class="dropdown-item" href="experiments.html">Lab protocols</a>
                          </div>
                    </li>

                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Drylab
                          </a>
                          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item" href="hardware.html">Hardware</a>
                            <a class="dropdown-item" href="software.html">Software</a>
                            <a class="dropdown-item" href="dryexperiments.html">Experiments</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="modelling.html">Modelling</a>
                          </div>
                    </li>

                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Results
                          </a>
                          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item" href="wetresults.html">Wetlab</a>
                            <a class="dropdown-item" href="dryresults.html">Drylab</a>
                          </div>
                    </li>

                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#">Parts</a></li>

                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                          Human Practices
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                          <a class="dropdown-item" href="humanpractices.html">Integrated Human Practices</a>
                          <a class="dropdown-item" href="publicengagement.html">Public Engagement</a>
                          <a class="dropdown-item" href="contribution.html">Contribution</a>
                        </div>
                    </li>

                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                          Team
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                          <a class="dropdown-item" href="team.html">Team</a>
                          <a class="dropdown-item" href="attributions.html">Attributions</a>
                          <a class="dropdown-item" href="collaborations.html">Collaborations</a>
                        </div>
                    </li>

                </ul>
            </div>
        </div>
    </nav>
      <div class="progress-container">
        <div class="progress-bar" id="myBar"></div>
      </div> 
  </div>
        

    
    <!-- Masthead-->
    <div data-aos="zoom-in" data-aos-duration="2000">
      <header class="masthead2 col-md-10" style="margin-left: auto; margin-right: auto;">

        <div class="masthead-heading2 text-uppercase"></div>

      </header>
    </div>




    <!-- Content -->


    <div class="abstract">
      <p> This section describes on the one hand the software behind our turbidostat (related to the <a href="proofofconcept.html" style="color: rgb(73, 73, 73);">proof of concept</a>) and on the other the computer program that will control the administration of levothyroxine (related to Hormonic <a href="T3biosensor.html" style="color: rgb(73, 73, 73);">T3 biosensor</a>). </p>
    </div>
 
    <div class="toc_container" id="description_container">
        <p class="toc_title">Software</p>
        <ul class="toc_list">
          <li><a href="#turbidostat">Related to our turbidostat</a></li>
            <ul>
                <li><a href="#temperature">Temperature control</a></li>
                <li><a href="#od">OD control</a></li>
                <li><a href="#software">Software flow</a></li>
            </ul>
             
          <li><a href="#levothyroxine">Related to the controlled administration of levothyroxine</a></li>
          <li><a href="#ref">References</a></li>
        </ul>
    </div>

  
   

  <section class="page-section" id="description-section">

  <!---------------------------------------------- Related to our turbidostat ---------------------------------->
    <div data-aos="fade-up">  
            <div class="collaboration">
                <h1 class="display-4" id="turbidostat">Related to our turbidostat</h1>
                <h4>Let's start with the software module of our turbidostat!</h4>
            </div>
            <br>
            <p>The turbidostat is controlled by the use of the open-source programming tool <a href="https://nodered.org/">Node-Red</a>, a browser based editor that uses a wide range of interconnected nodes to pursue several functions. The Firmata Library, which can be found within the Examples section of the Arduino software, enables the communication between the Arduino Board and the Node-Red software of the host computer.</p>
            <img class="center" src="img/software/node_red.gif" atr="">
    </div>
          

        <div class="spacer"></div>
        <div class="spacer"></div>



    <div data-aos="fade-up">
            <div class="collaboration">
                <h4 id="temperature">Temperature control</h4>
            </div>

            <p>Regarding the temperature regulation, a Proportional-Integral-Derivative (PID) controller is implemented, a regulation tool used in over 90% of control loops due to its great static performance and elimination of the steady state error [2]. Since rises in temperature can lead to proteic denaturalization and drops to decelerated catalysis [1], this non-vibrating static behavior provided by the PID controller becomes essential. However, its dynamical performance is known to be deficient for setpoint changes [2]. Even so, cell growth is most efficient at 37ºC; a temperature in which enzymatic activity and protein synthesis proceed optimally [1]. Therefore, no changes are required, making the PID regulation system optimal for this temperature tracking task.</p>
            <p>This PID controller governs a heating and cooling process that aims to maintain the system at a steady temperature. In order to do so, it continuously computes an error value e(t) as the difference between the desired temperature r(t) and the measured one y(t) and applies a correction action u(t), which in this case is turning the heating resistors on or off.</p>
            <p>The correction action is taken based on proportional (P), integral (I) and derivative (D) terms, which present different benefits regarding the correct track of the established setpoint. These can be empirically tuned in order to optimize the correction action and, therefore, the overall response of the system. </p>
            <p>So as to implement the PID controller, a relation is established between the recorded analog value at the surface of the aluminum tube and the actual value of the medium in which the organisms are growing. Then, the inverse relation is applied to the defined setpoint, in order to compare it to the value given by the thermistor, and compute the corresponding correction action. This transfer function between the analog value and temperature is acquired by the realization of a temperature calibration process (for further details go to temperature calibration section in <a href="dryexperiments.html">Experiments</a> page.).</p>
    </div>

        <div class="spacer"></div>
        <div class="spacer"></div>

    <div data-aos="fade-up">
            <div class="collaboration">
                <h4 id="od">Optical Density control</h4>
            </div>

            <p>The density of cells in liquid culture can be regulated by the use of the bang-bang control method, which switches continuously between two states, either On or Off. In comparison with the PID controller, it has a greater dynamic performance, especially when it comes to setpoint changes or the presence of large disturbances, but has an oscillating behavior in steady state [2]. Therefore, although setpoint tracking will not be as accurate as for the PID system, different cell concentrations can be obtained, and all of that without the need of parameter tuning.</p>
            <p>For this method, when the measured OD value y(t) exceeds a certain threshold r(t), the control action u(t) is taken: the controller is in its On state. However, if y(t) is under the threshold, no control action is taken: the controller is in its Off state. </p>
            <p>The corresponding control action is characterized by a dilution process that aims to lower the cell density via small LB injections. However, in order to preserve the total volume and not exceed the vial’s capacity, a complementary control volume is exerted. Therefore, if the defined OD is exceeded, the LB injecting pump is actioned, followed by the waste extracting pump. The amount of time during which the pumps are activated is defined by a pump calibration process.</p>
            <p>The desired OD value will be set as the threshold and, so that it is possible to compare it to the analog value given by the photodiode, the equivalence between both terms is found. The transfer function, which defines that relationship, is acquired by the realization of an OD calibration process. </p>
    </div>

    <div class="spacer"></div>
    <div class="spacer"></div>

    <div data-aos="fade-up">
            <div class="collaboration">
                <h4 id="software">Software flow</h4>
            </div>

            <p>The open-source programming tool Node-Red includes the dashboard library: a module that provides an iterative live data interface. It allows real time control of the turbidostat’s parameters and outcomes in a truly intuitive way for the user.</p>
            <p>The interface is divided into three main columns:</p>

            <div class="text-segment-select">
                <div class="text-segment-select-item box-anim" id="select-sleeve" style="background-color: #e1e1e1;">
                    <h2 style="color: rgb(86, 173, 119);">Global control</h2>
                </div>
                <div class="text-segment-select-item box-anim" id="select-fluidic">
                    <h2 style="color: #00aad4ff;">OD regulation</h2>
                </div>
                <div class="text-segment-select-item box-anim" id="select-electronic">
                    <h2 style="color:  #ffcc00ff; padding-top: 0.3rem; font-size: 1.5rem !important;">Temperature stabilization</h2>
                </div>
              </div>
            
        
              <section id="select-sleeve-2" class="text-segment-section">
                  <h2>Global control of the turbidostat</h2>
                  <p>It includes three main buttons:</p>
                  <dl class="row">
                    <dt class="col-sm-3">Setup</dt>
                    <dd class="col-sm-9">The setup button is pressed at the beginning in order to fill the tubes that will later add LB to the medium and also to control the total volume so that it does not exceed the vial’s capacity. </dd>
                    <dt class="col-sm-3">Launch</dt>
                    <dd class="col-sm-9">The launch button must be pressed after the initial setpoint values for the temperature and OD are defined. Its activation causes a cascade of events that results in the stabilization of those parameters.</dd>
                    <dt class="col-sm-3">Stop</dt>
                    <dd class="col-sm-9">The stop button acts as an emergency switch that immediately interrupts the turbidostat’s activity. If pressed and no volume adjustment is needed, no setup is needed to resume the activity.</dd>
              </section> 
            
              <section style="display:none;" id="select-fluidic-2" class="text-segment-section">
                <h2>OD regulation</h2>
                <p>OD regulation is governed by the OD measurement switch, which is directly activated when the Launch button is pressed but can be deactivated at any time. </p>
                <ul>
                    <li>The desired OD value can be defined by pressing the upward and downward arrows of the setpoint button.</li>
                    <li>OD value evolution over time is visualized in the bottom graph, which also includes a tendency line defined by the mean value of each set of measurements. </li>
                    <li>The actual OD value can be visualized under the graph.</li>
                </ul>
              </section>
        
              <section style="display: none" id="select-electronic-2" class="text-segment-section">
                  <h2>Temperature stabilization</h2>
                  <p>The temperature stabilization around the defined setpoint is monitored by two different graphs: a gauge and a linear chart.</p>
                  <ul>
                      <li>The desired temperature value can be defined by pressing the upward and downward arrows of the setpoint button.</li>
                      <li>The gauge graph shows the evolution of temperature over time.</li>
                      <li>Realtime temperature data is visualized in the bottom graph.</li>
                  </ul>
              </section>

              <br>
              <p>Note that any of the components involved in the OD or temperature control can be turned on or off by the use of the various switches. Also note that all the OD and temperature values will be saved in excel documents.</p>
    </div>


    <div class="spacer"></div>
    <div class="spacer"></div>


<!------------------------------- Related to the controlled administration of levothyroxine ---------------------------->

    <div data-aos="fade-up">  
        <div class="collaboration">
            <h1 class="display-4" id="levothyroxine">Related to the controlled administration of levothyroxine</h1>
            <h4>Let's continue with the software module that will control the administration of levothyroxine! </h4>
        </div>
        <br>
        <p>How can we determine and regulate a correct dosification depending on the measured hormonal level? As stated at the Turbidostat’s Temperature Control section, the majority of control systems make use of PID controllers: regulation mechanisms that aim to maintain a system at a steady state by the use of feedback loops.</p>
        <p>This control mechanism is intended to continuously compute an error as the difference between the desired hormonal level and the measured one, in order to later apply a correction action that compensates for that deviation: a levothyroxine injection that will be metabolized into T3 hormone.</p>
        <p>This correction action will compensate for the error depending on proportional, integrative and derivative constants, which can be tuned so that the tracking of the hormonal level is optimal. In order to do so, the system’s response must be modeled in relation to the levothyroxine injection. However, the dynamics that play a role in the metabolization of levothyroxine into T3 are still unclear. In order to characterize this unknown process, a clinical trial should be carried out in which a patient's response to different levothyroxine injections is tracked by the use of our successfully engineered bionsensor. The obtained data could then be fitted into a mathematical model of subcutaneous injection of levothyroxine, like the one showed published at [3]:</p>
        <p>Here x1 corresponds to the subcutaneous levothyroxine mass that is stored within the injection depot, x2 is the subcutaneous levothyroxine mass proximal to plasma, L is the plasma levothyroxine concentration and u(t) is the correction action, also known as the input function. The parameters kd and ke are the degradation rate in the depot and plasma respectively and Vd is the volume of plasma. Regarding the parameters related to the specific LT4 to T3 conversion, kb is the baseline production of the patient, kt is the transformation rate and kf is the degradation rate. It should be taken into account that the dynamics of the system may not fit into this model, and further investigation should be carried out as data is being collected.</p>
        <p>Apart from the system’s characterization, several considerations must be taken into account when implementing this control: the reference value to which the measurements are compared is usually set at a fixed value. However, hormones tend to follow a circadian rhythm and, although it has not been yet characterized, experts have reasons to believe that thyroid hormones follow a temporal pattern of their own. Indeed, once again, this could be identified by the use of Hormonic, by monitoring the levels of T3 hormone of a healthy individual along time, so that the target value is not constant throughout the day but changes the same wait it does physiologically. </p>
        <p>On top of that, it must be taken into account that the half life of levothyroxine is large and its metabolization into T3 slow, resulting in a long process that generates a delay. Consequently, it must be ensured that enough time is waited between measurements so that the registered values reflect the total effect of the previous injection, and not just partial. The uncontrolled continuous injection of diluted levothyroxine is quite risky: it could lead to hyperthyroidism!.Therefore, the biosensor should take discrete measurements and the rate of injection must never exceed the defined maximum rate of 100 mcg per minute [4].</p>
    </div>

    
    <div class="spacer"></div>
    <div class="spacer"></div>

    <h2 id="ref">References</h2>
    <p class="references">[1] The Effects of Temperature and Atmospheric Perturbation During Cell Culture: The Silent Variables. (n.d.). Retrieved October 17, 2020, from <a href="https://www.essenbioscience.com/en/resources/articles/temperature-atmospheric-perturbation-cell-culture/">https://www.essenbioscience.com/en/resources/articles/temperature-atmospheric-perturbation-cell-culture/</a></p>
    <p class="references">[2] Chen, S., Zhao, J., &amp; Qian, J. (2007). A Design Method of Bang-Bang and PID Integrated Controller Based on Rough Set. Fourth International Conference on Fuzzy Systems and Knowledge Discovery (FSKD 2007). doi:10.1109/fskd.2007.17</p>
    <p class="references">[3] Li, J., & Johnson, J. D. (2009). MATHEMATICAL MODELS OF SUBCUTANEOUS INJECTION OF INSULIN ANALOGUES: A MINI-REVIEW. Discrete and continuous dynamical systems. Series B, 12(2), 401–414. https://doi.org/10.3934/dcdsb.2009.12.401</p>
    <p class="references">[4] PDR Search. (n.d.). Retrieved October 17, 2020, from <a href="https://www.pdr.net/drug-summary/Levoxyl-levothyroxine-sodium-2553">https://www.pdr.net/drug-summary/Levoxyl-levothyroxine-sodium-2553</a></p>



  </section>






              <!-- Footer -->

      <div class="footer" id="footer_id">
        <div class="inner_footer">
            <div class="logo_container">
                <img src="img/logo_footer.png">
            </div>

            <div class="footer_third">
                <h1>FOLLOW US</h1>
                <a href="https://www.instagram.com/igembarcelona/">
                    <div class="icon">
                        <img src="img/instagram.png">
                    </div>
                </a>
                <a href="https://twitter.com/igembarcelona?lang=gl">
                    <div class="icon">
                        <img src="img/twitter.png">
                    </div>
                </a>
                <a href="https://www.twitch.tv/igem_upf">
                    <div class="icon">
                        <img src="img/twitch.png">
                    </div>
                </a>
            </div>

            <div class="footer_third">
                <h1>CONTACT US</h1>
                <li>igem@upf.edu</li>
                <span>
                    PRBB Building <br>
                    Doctor Aiguader, 88 <br>
                    08003 Barcelona <br>
                </span>
            </div>

            
        </div>

    </div>
      
        <!-- Bootstrap core JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.bundle.min.js"></script>
        <!-- Third party plugin JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
        <!-- Contact form JS-->
        <script src="assets/mail/jqBootstrapValidation.js"></script>
        <script src="assets/mail/contact_me.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
        <!-- AOS animations -->
        <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
        <script>   
          AOS.init(); 
       </script>


        <script>
            // When the user scrolls the page, execute myFunction 
            window.onscroll = function() {myFunction()};
            
            function myFunction() {
              var winScroll = document.body.scrollTop || document.documentElement.scrollTop;
              var height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
              var scrolled = (winScroll / height) * 100;
              document.getElementById("myBar").style.width = scrolled + "%";
            }
        </script>

</body>
</html>